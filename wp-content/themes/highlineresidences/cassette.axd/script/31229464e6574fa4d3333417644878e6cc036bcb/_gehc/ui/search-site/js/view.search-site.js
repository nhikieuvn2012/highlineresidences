(function(n,t){var i=27;extend("gehc._prototypes.searchSite.view.creator",gehc._prototypes.search.view.creator.extend({events:{"keyup .search-input":"keyup"},initialize:function(n){n=n||{},_.defaults(this,n),this.doKeyPress=_.debounce(_.bind(this.handleKeyup,this),250),gehc._prototypes.search.view.creator.prototype.initialize.call(this,n)},keyup:function(n){var r,u,f;n.which===i?pubsub.publish("searchSite.hideResults"):n.keyCode==13?(r=t("#gehc-search-site-input").val(),u=document.URL,r&&r!=window.searchHint&&(window.location="/search?q="+r+"&u="+u)):(f=t(".search-input").val(),f.length>1?this.doKeyPress(n):pubsub.publish("searchSite.hideResults"))},handleKeyup:function(n){var i=t("#gehc-search-site-input").val();pubsub.publish("sendQuickSearchData",[i]),this.clickSubmit(n)}})),extend("gehc._prototypes.searchSite.view.result",gehc._prototypes.search.view.result.extend({})),extend("gehc._prototypes.searchSite.view.results",gehc._prototypes.search.view.filterableResults.extend({events:{keyup:"keyup"},initialize:function(t){var i;i=this,t=t||{},_.defaults(this,t),gehc._prototypes.search.view.filterableResults.prototype.initialize.call(this,t),_.defaults(this,{expandSpeed:400,isShowing:!1}),_.extend(this.events,gehc._prototypes.search.view.filterableResults.prototype.events),this.makeUnfocusable(),this.delegateEvents(),this.results.addClass("search-results-cpuFix_"),this.throttledSearch=_.throttle(this.performSearch,500),pubsub.subscribe("gehc.util.responsive",function(){n.gehc.util.responsive.mode=="mobile"&&i.hide()}),pubsub.subscribe("searchSite.hideResults",function(){i.hide()}),pubsub.subscribe("searchSite.createSearch",function(){i.updateResults()})},clickCloseResults:function(n){gehc._prototypes.search.view.filterableResults.prototype.clickCloseResults.call(this,n),this.hide()},keyup:function(n){n.which===i&&(this.hide(),this.searchInput.searchInput.focus())},render:function(){gehc._prototypes.search.view.filterableResults.prototype.render.call(this),t(".description",this.resultsList).each(function(n,i){i=t(i),i.html(gehc.util.truncateWithEllipsis(i.html(),50))})},updateResults:function(){var n;n=this,setTimeout(function(){n.searchInput.getValue().length>0?n.show():n.hide()},1),this.throttledSearch(n.searchInput.getValue())},show:function(t){var i;if(n.gehc.util.responsive.mode!="mobile"){if(this.isShowing===!0)return;i=this,this.results.removeClass("search-results-cpuFix_"),this.makeFocusable(),this.isShowing=!0,this.foundResultsContainer.show(),this.noResultsContainer.hide(),this.expandedSize=vsa.getNaturalHeight(this.foundResultsContainer),this.resultsContainer.stop().animate({height:this.expandedSize},{duration:this.expandSpeed,complete:function(){i.submitButton.forceLayoutUpdate(),pubsub.publish("headerResize"),t&&t()}}),this.foundResultsContainer.hide()}},hide:function(n){var t;this.isShowing!==!1&&(t=this,this.isShowing=!1,this.resultsContainer.stop().animate({height:0},{duration:this.expandSpeed,complete:function(){t.results.addClass("search-results-cpuFix_"),t.resultsList.children().remove(),t.makeUnfocusable(),pubsub.publish("headerResize"),n&&n()}}))},performSearch:function(n){var t=this;this.isShowing&&(this.showLoadingIndicator(),gehc._prototypes.searchSite.util.performSearch(this.searchUrl,{query:n},function(n,i){t.hideLoadingIndicator(),t.collection.reset(),t.collection.add(n.models),t.featuredResult=i,t.render()}))}}))})(this,jQuery)