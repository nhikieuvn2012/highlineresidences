(function(n,t){var f=27,r,u,i;r=t(window),u=t(document.documentElement),i=!1,extend("debug.toggleNavFadeOut",function(){return i=!i}),extend("gehc._prototypes.navigation.view.subNavigation",Backbone.View.extend({events:{"mouseenter .submenu-item":"mouseenterSubmenuItem","focus .submenu-item":"focusSubmenuItem","mouseleave .submenu-item":"mouseleaveSubmenuItem","blur .submenu-item":"blurSubmenuItem",mouseleave:"mouseleave"},initialize:function(n){n=n||{},_.defaults(this,n),this.submenuItems=t(".submenu-item",this.el),this.contentContainers=t(".submenu-item-content",this.submenuItems),this.el.parent().height(this.getHeightOfTallestSubmenuItem()),this.showFirstItem(),Modernizr.touch&&this.touchify()},mouseleave:function(){this.showFirstItem()},mouseenterSubmenuItem:function(n){var i;i=t(n.currentTarget),this.hoverLi(i)},focusSubmenuItem:function(n){this.mouseenterSubmenuItem(n)},mouseleaveSubmenuItem:function(n){var i;/touch/.test(n.type)||(i=t(n.currentTarget),this.unhoverLi(i))},blurSubmenuItem:function(n){this.mouseleaveSubmenuItem(n)},getHeightOfTallestSubmenuItem:function(){var n,i;return i=[],n=this.el.closest(".subnav"),n.css({display:"block"}),t(".submenu-item",this.el).each(function(n,r){var u;r=t(r),u=t(".submenu-item-content",r),u.css({display:"block"}),i.push(u.height()),u.css({display:""})}),n.css({display:""}),Math.max.apply(Math.max,i)},hoverLi:function(n){n.addClass("hover_"),this.unshowFirstItem()},unhoverLi:function(n){n.removeClass("hover_")},showFirstItem:function(){this.submenuItems&&this.submenuItems.eq(0).addClass("default_")},unshowFirstItem:function(){this.submenuItems&&this.submenuItems.eq(0).removeClass("default_")},touchify:function(){gehc.util.touchify(this)}})),extend("gehc._prototypes.navigation.view.navigationNode",Backbone.View.extend({events:{"click .nav-link":"click","mouseenter .nav-link":"mouseenter","focus .nav-link":"focus",mouseleave:"mouseleave",keyup:"keyup"},initialize:function(n){n=n||{},_.defaults(this,n),_.defaults(this,{transitionSpeed:250,showDelay:250,contentClass:"subnav"}),this.contentEl=t("."+this.contentClass,this.el),this.contentEl.height(0),Modernizr.touch&&this.touchify()},focus:function(n){this.listenForExternalFocus(),this.mouseenter(n)},mouseenter:function(){var n;n=this,this.timeoutId=setTimeout(function(){n.showContent.call(n)},this.showDelay)},mouseleave:function(){this.hideContent()},click:function(n){Modernizr.touch&&n.preventDefault()},keyup:function(n){n.which===f&&this.hideContent()},touchify:function(){gehc.util.touchify(this)},showContent:function(t){this.el.hasClass("hover_")||n.gehc.util.responsive.mode=="mobile"||(this.el.addClass("hover_"),this.contentEl.stop(!0).css({display:"block"}).animate({height:vsa.getNaturalHeight(this.contentEl)},{duration:this.transitionSpeed,easing:"easeInOutExpo",complete:function(){t&&t()}}),this.listenForExternalFocus())},hideContent:function(n,t){var r,u;i!==!0&&(r=this,clearTimeout(this.timeoutId),delete this.timeoutId,this.el.hasClass("hover_"))&&(u=t===!0?0:this.transitionSpeed,this.contentEl.stop(!0).animate({height:0},{duration:u,easing:"easeInOutExpo",complete:function(){r.contentEl.css({display:"none"}),n&&n()}}),this.el.removeClass("hover_"),this.unlistenForExternalFocus())},listenForExternalFocus:function(){var n;n=this,u.delegate("input, textarea, a, button, select","focus."+this.cid,function(i){t.contains(n.el[0],i.target)===!1&&n.hideContent()})},unlistenForExternalFocus:function(){u.undelegate("input, textarea, a, button, select","focus."+this.cid)}})),extend("gehc._prototypes.navigation.view.navigationArray",Backbone.View.extend({initialize:function(n){var i;i=this,n=n||{},_.defaults(this,n),_.defaults(this,{nodePrototype:gehc._prototypes.navigation.view.navigationNode}),this.nodes=[],t("li",this.el).each(function(n,r){r=t(r),i.nodes.push(new i.nodePrototype({el:r,owner:i}))})}})),extend("gehc._prototypes.navigation.view.autoFixedNav",Backbone.View.extend({initialize:function(n){var i;Modernizr.positionfixed&&(i=this,n=n||{},_.defaults(this,n),this.storeNonfixedOffsetDataToEl(),this.spacer=t(document.createElement("div")).addClass("autoFixedNav-spacer").hide(),this.el.after(this.spacer),this.spacer=this.el.next(),this.isAttached=!0,r.bind("scroll",function(n){i.windowScroll(n)}),pubsub.subscribe("headerResize",function(){i.storeNonfixedOffsetDataToEl()}))},windowScroll:function(){var n;n=this.el.data("autoFixedNavData"),r.scrollTop()>n.originalOffset.top?this.detach():this.isAttached||this.attach()},storeNonfixedOffsetDataToEl:function(){this.el.css("position")!=="fixed"&&this.el.data("autoFixedNavData",this.getBaseOffset())},getBaseOffset:function(){return{originalOffset:this.el.offset()}},detach:function(){this.el.css({position:"fixed",top:"0px","z-index":999}),this.spacer.show(),this.isAttached=!1},attach:function(){this.el.css({position:"",top:"","z-index":""}),this.spacer.hide(),this.isAttached=!0}}))})(this,jQuery)