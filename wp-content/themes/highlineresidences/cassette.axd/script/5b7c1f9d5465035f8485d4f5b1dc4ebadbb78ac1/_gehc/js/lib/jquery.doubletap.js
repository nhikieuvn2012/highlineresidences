(function(n){var r={swipeTolerance:40},i=function(t,i){this.target=n(t),this.touch=i,this.startX=this.currentX=i.screenX,this.startY=this.currentY=i.screenY,this.eventType=null},t;i.options={},i.latestTap=null,i.prototype.move=function(n){this.currentX=n.screenX,this.currentY=n.screenY},i.prototype.process=function(){var n=this.currentX-this.startX,t=this.currentY-this.startY;n==0&&t==0?this.checkForDoubleTap():Math.abs(t)>i.options.swipeTolerance&&Math.abs(t)>Math.abs(n)?(this.eventType=t>0?"swipedown":"swipeup",this.target.trigger("swipe",[this])):Math.abs(n)>i.options.swipeTolerance&&(this.eventType=n>0?"swiperight":"swipeleft",this.target.trigger("swipe",[this])),this.eventType&&this.target.trigger(this.eventType,[this]),this.target.trigger("touch",[this])},i.prototype.checkForDoubleTap=function(){i.latestTap&&new Date-i.latestTap<400&&(this.eventType="doubletap"),this.eventType||(this.eventType="tap"),i.latestTap=new Date},t=function(t,u){i.options=n.extend(r,u),t.bind("touchstart",this.touchStart),t.bind("touchmove",this.touchMove),t.bind("touchcancel",this.touchCancel),t.bind("touchend",this.touchEnd)},t.prototype.touchStart=function(n){var r=this;t.eachTouch(n,function(n){t.touches[n.identifier]=new i(r,n)})},t.prototype.touchMove=function(n){t.eachTouch(n,function(n){var i=t.touches[n.identifier];i&&i.move(n)})},t.prototype.touchCancel=function(n){t.eachTouch(n,function(n){t.purge(n,!0)})},t.prototype.touchEnd=function(n){t.eachTouch(n,function(n){t.purge(n)})},t.touches={},t.purge=function(n,i){if(!i){var r=t.touches[n.identifier];r&&r.process()}delete t.touches[n.identifier]},t.eachTouch=function(n,t){for(var n=n.originalEvent,r=n.changedTouches.length,i=0;i<r;i++)t(n.changedTouches[i])},n.fn.addSwipeEvents=function(n,i){return!i&&jQuery.isFunction(n)&&(i=n,n=null),new t(this,n),i&&this.bind("touch",i),this}})(jQuery)