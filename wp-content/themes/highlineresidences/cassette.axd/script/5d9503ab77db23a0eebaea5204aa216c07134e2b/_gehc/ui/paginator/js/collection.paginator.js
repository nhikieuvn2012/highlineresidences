(function(n,t){extend("gehc._prototypes.paginator.collection.contentItems",Backbone.Collection.extend({initialize:function(n,t){t=t||{},_.defaults(this,t),this.model=t.model||gehc._prototypes.paginator.model.collectionItem,_.defaults(this,{maxCacheSize:48,pageSize:12,pagesToCache:4,cacheStart:0}),this.setPageSize(this.pageSize),this.setMaxCacheSize(this.pagesToCache),this.setCacheStart(this.cacheStart),this.previousParams={}},getPageSize:function(){return this.pageSize},setPageSize:function(n){this.pageSize=n},getCacheStart:function(){return this.cacheStart},setCacheStart:function(n){this.cacheStart=parseInt(n,10)},getMaxItems:function(){return this.totalItems||1},setTotalItems:function(n){this.totalItems=n},getMaxCacheSize:function(){return this.maxCacheSize},setMaxCacheSize:function(n){this.maxCacheSize=n*this.pageSize},getCurrentPage:function(){return this.currentPage},setCurrentPage:function(n){this.currentPage=n},updateData:function(i,r,u){var f;f=this,_.defaults(i,{howMany:this.maxCacheSize}),i=_.extend(this.previousParams,i),this.url=searchURL,t.ajax(this.url,{data:i,cache:!1,traditional:!0,dataType:"json",success:function(n,i,u){var e,o,s;if(n=t.parseJSON(u.responseText),o=n.items,s=o.length,n.hasOwnProperty("scope"))switch(n.scope){case"education":for(e=0;e<s;e++)o[e].detailStrings=this.makeEducationDetailStrings(o[e].details)}f.setTotalItems(f.extractTotalItemsFromResponse(n)),f.setCacheStart(f.extractStartingPointFromResponse(n)),f.replaceModelsWith(f.extractModelsFromResponse(n)),r(n)},makeEducationDetailStrings:function(n){var i=n.length,r=[],t;if(i){for(t=0;t<i;t++)r.push(gehc._prototypes.searchDetailed.util.makeEducationDetailString(n[t]));return r}},error:function(t,i,r){n.console&&console.log(r),u&&u()}})},replaceModelsWith:function(n){this.reset(),this.add(n)},calculateStartPoint:function(){var n;return this.getPageSize()===0?n=0:(n=this.getMaxCacheSize()*Math.floor(this.getCurrentPage()*this.getPageSize()/this.getMaxCacheSize()),cacheableSegmentSize=this.getMaxCacheSize(),n=Math.min(n,this.getMaxItems()-this.getMaxItems()%this.getPageSize()),n=Math.max(n,0)),n},resetPageData:function(){this.setCacheStart(0),this.setCurrentPage(0)},extractModelsFromResponse:function(n){return n.items},extractTotalItemsFromResponse:function(n){return+n.totalItems},extractStartingPointFromResponse:function(n){return+n.startFrom}}))})(this,jQuery)